name: Go
on: 
  push:
    branches:
      - master
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: Set up Go 1.18 ğŸ§§
      uses: actions/setup-go@v3
      with:
        go-version: 1.18
      id: go

    - name: Checkout ğŸ›ï¸
      uses: actions/checkout@v3

    - name: Build ğŸ
      id: build
      run: |
        bash scripts/build.sh
    
    - name: Upload Linux ğŸ“‹
      uses: actions/upload-artifact@v3
      with:
        name: AGDDoS-Linux
        path: |
          ./build/linux/*
        retention-days: 14
        if-no-files-found: warn

    - name: Upload MacOS ğŸ“‹
      uses: actions/upload-artifact@v3
      with:
        name: AGDDoS-MacOS
        path: |
          ./build/darwin/*
        retention-days: 14
        if-no-files-found: warn
    
    - name: Upload Windows ğŸ“‹
      uses: actions/upload-artifact@v3
      with:
        name: AGDDoS-Windows
        path: ./build/windows/*
        retention-days: 31
        if-no-files-found: warn
    
    - name: Upload Freebsd ğŸ“‹
      uses: actions/upload-artifact@v3
      with:
        name: AGDDoS-Freebsd
        path: |
          ./build/freebsd/*
        retention-days: 7
        if-no-files-found: warn
    