name: Go
on: [push]
jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: Set up Go 1.18 üßß
      uses: actions/setup-go@v3
      with:
        go-version: 1.18
      id: go

    - name: Checkout üõéÔ∏è
      uses: actions/checkout@v3

    - name: Build for All Platforms üéÅ
      run: |
        mkdir -p ./build
        env GOOS=linux GOARCH=amd64    go build -o ./build/AGDDoS-linux-amd64
        env GOOS=linux GOARCH=arm64    go build -o ./build/AGDDoS-linux-arm64
        env GOOS=linux GOARCH=arm      go build -o ./build/AGDDoS-linux-arm
        env GOOS=linux GOARCH=mips     go build -o ./build/AGDDoS-linux-mips
        env GOOS=linux GOARCH=mipsle   go build -o ./build/AGDDoS-linux-mipsle
        env GOOS=linux GOARCH=mips64   go build -o ./build/AGDDoS-linux-mips64
        env GOOS=linux GOARCH=mips64le go build -o ./build/AGDDoS-linux-mips64le
        env GOOS=darwin GOARCH=amd64   go build -o ./build/AGDDoS-macos-amd64
        env GOOS=darwin GOARCH=arm64   go build -o ./build/AGDDoS-macos-arm64
    
    - name: Build for Windows üéÅ
      run: |
        env CGO_ENABLED=0 GOOS=windows GOARCH=amd64  go build -o ./build/AGDDoS-amd64.exe
        env CGO_ENABLED=0 GOOS=windows GOARCH=amd  go build -o ./build/AGDDoS-arm.exe
        env CGO_ENABLED=0 GOOS=windows GOARCH=arm64  go build -o ./build/AGDDoS-arm64.exe
    
    - name: Upload üìã
      uses: actions/upload-artifact@v3
      with:
        name: AGDDoS-Artifacts
        path: ./build/*
        retention-days: 15
        if-no-files-found: warn # 'warn' or 'ignore' are also available, defaults to `warn`
